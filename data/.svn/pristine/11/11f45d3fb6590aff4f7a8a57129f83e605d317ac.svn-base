<div class="row" id="test-content"><div class="col-xs-12"><label class="col-sm-12 control-label no-padding-right" data-i18n="taskAdd.title"></label><form class="form-horizontal" role="form" class="task"><div class="form-group"><label class="col-sm-3 control-label no-padding-right" for="website" data-i18n="taskAdd.platform"></label><div class="col-sm-9"><select id="website" class="col-xs-10 col-sm-5"></select></div></div><div class="form-group"><label class="col-sm-3 control-label no-padding-right" for="logic" data-i18n="taskAdd.taskName"></label><div class="col-sm-9"><select id="logic" class="col-xs-10 col-sm-5"></select></div></div><div class="form-group" id="task_target"></div><div class="form-group"><label class="col-sm-3 control-label no-padding-right" for="task_credit" data-i18n="taskAdd.taskCredit"></label><div class="col-sm-9"><input id="task_credit" type="number" min="0" placeholder="" class="col-xs-10 col-sm-5" data-i18n="taskAdd.taskCreditInput"></div></div><div class="form-group"><label class="col-sm-3 control-label no-padding-right" for="task_target_num" data-i18n="taskAdd.taskTargetNum"></label><div class="col-sm-9"><input id="task_target_num" type="number" min="0" placeholder="" class="col-xs-10 col-sm-5" data-i18n="taskAdd.taskTargetNumInput"></div></div><div class="form-group"><label class="col-sm-3 control-label no-padding-right" data-i18n="taskAdd.hoursLimit"></label><div class="col-sm-9"><label><input id="hours_limit" name="hours_limit" class="ace ace-switch ace-switch-7" type="checkbox"> <span class="lbl"></span></label></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit0"></label><input class="col-sm-2" type="number" min="1" name="task_h_0" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit1"></label><input class="col-sm-2" type="number" min="1" name="task_h_1" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit2"></label><input class="col-sm-2" type="number" min="1" name="task_h_2" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit3"></label><input class="col-sm-2" type="number" min="1" name="task_h_3" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit4"></label><input class="col-sm-2" type="number" min="1" name="task_h_4" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit5"></label><input class="col-sm-2" type="number" min="1" name="task_h_5" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit6"></label><input class="col-sm-2" type="number" min="1" name="task_h_6" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit7"></label><input class="col-sm-2" type="number" min="1" name="task_h_7" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit8"></label><input class="col-sm-2" type="number" min="1" name="task_h_8" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit9"></label><input class="col-sm-2" type="number" min="1" name="task_h_9" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit10"></label><input class="col-sm-2" type="number" min="1" name="task_h_10" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit11"></label><input class="col-sm-2" type="number" min="1" name="task_h_11" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit12"></label><input class="col-sm-2" type="number" min="1" name="task_h_12" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit13"></label><input class="col-sm-2" type="number" min="1" name="task_h_13" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit14"></label><input class="col-sm-2" type="number" min="1" name="task_h_14" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit15"></label><input class="col-sm-2" type="number" min="1" name="task_h_15" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit16"></label><input class="col-sm-2" type="number" min="1" name="task_h_16" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit17"></label><input class="col-sm-2" type="number" min="1" name="task_h_17" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit18"></label><input class="col-sm-2" type="number" min="1" name="task_h_18" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit19"></label><input class="col-sm-2" type="number" min="1" name="task_h_19" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit20"></label><input class="col-sm-2" type="number" min="1" name="task_h_20" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit21"></label><input class="col-sm-2" type="number" min="1" name="task_h_21" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit22"></label><input class="col-sm-2" type="number" min="1" name="task_h_22" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit23"></label><input class="col-sm-2" type="number" min="1" name="task_h_23" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div></div><div class="clearfix form-actions"><div class="col-md-offset-3 col-md-6"><button class="btn btn-info" type="button" onclick="addTask()"><i class="ace-icon fa fa-check bigger-110"></i> <span data-i18n="operation.save"></span></button></div></div></form></div></div><textarea id="templateGroupSelect" style="display:none">

  <option value="0" data-i18n="operation.default"></option>
  {{#data}}
  <option value="{{group_id}}">{{group_name}}</option>
  {{/data}}

</textarea><style>#task_target>div{padding-left:0;padding-right:0}</style><script type="text/javascript">function loadLogic(e){$("#task_target").empty(),e&&($("#logic").empty(),jsonp("task/logic.php?website="+e,function(e){tmp_logic_data=e.rows;var a=$("<option>").val("").text(t("taskAdd.pleaseSelect"));$("#logic").append(a),$.each(tmp_logic_data,function(t,e){a=$("<option>").val(e.logic_id).text(e.logic_name),$("#logic").append(a)})}))}function addTask(){if($("#website").val().length<=0)return mbox($.t("taskAdd.pleaseSelectWebsite")),!1;if(tmp_logic_data.length<=0)return mbox($.t("taskAdd.logicDataEmpty")),!1;if($("#logic").val().length<=0)return mbox($.t("taskAdd.pleaseSelectLogic")),!1;var t=tmp_logic_data[tmp_logic_index];if(isNaN(parseInt($("#task_credit").val()))||parseInt($("#task_credit").val())<parseInt(t.logic_credit))return mbox($.t("taskAdd.minCreditLimit")),!1;if(isNaN(parseInt($("#task_target_num").val()))||parseInt($("#task_target_num").val())<=0)return mbox($.t("taskAdd.minTargetNumLimit")),!1;"object"==typeof t.logic_param&&$(t.logic_param).each(function(e,a){"true"==a.custom.toLowerCase()&&(t.logic_param[e].value=$("#"+a.key).val())});var e=JSON.stringify(t.logic_param),a=$("#website").val(),t=$("#logic").val(),i=$("#task_credit").val(),o=$("#task_target_num").val(),l=$("#hours_limit:checked").length>0?1:0,r="website="+a;r+="&logic="+t,r+="&task_credit="+i,r+="&task_target_num="+o,r+="&logic_param="+paramEncode(e),r+="&hours_limit="+l;for(var n=0;24>n;n++)r+="&task_h_"+n+"="+$("input[name=task_h_"+n+"]").val();jsonp("task/publish.php?"+r,function(t){void 0==t.result&&($(grid_selector).trigger("reloadGrid"),hidePbox()),mbox(t.msg)})}$(function(){$(".hours_limit").hide(),$("#hours_limit").on("change",function(){var t=$("#hours_limit");return $("#task_target_num").val()>0?void(t.attr("checked")?(t.removeAttr("checked"),$(".hours_limit").hide()):(t.attr("checked","checked"),$(".hours_limit").show())):(t.removeAttr("checked"),void $(".hours_limit").hide())}),$("#task_target_num").on("change",function(){var t=$(this);return t.val()>0?void $(".input-size-slider").slider({max:t.val()}):(t.removeAttr("checked"),void $(".hours_limit").hide())}),$(".input-size-slider").slider({value:1,range:"min",min:1,max:100,step:1,slide:function(t,e){var a=$(this),i=parseInt(e.value);a.parent().find("input[type=number]").val(i)}})});var tmp_logic_data=[],tmp_logic_index=null;$("#logic").attr("disabled","disabled"),jsonp("website/ls.php",function(e){$("#website").unbind("change");var a=$("<option>").val("").text(t("taskAdd.pleaseSelect"));$("#website").append(a),$.each(e,function(t,e){""!=e.website_id&&""!=e.website_name&&(a=$("<option>").val(e.website_id).text(e.website_name),$("#website").append(a))}),$("#website").bind("change",function(){$("#logic").removeAttr("disabled"),loadLogic($(this).val())})}),$("body").delegate("#logic","change",function(){var t=$(this);$(tmp_logic_data).each(function(e,a){return a.logic_id==t.val()?(tmp_logic_index=e,$("#task_target").html(""),$(a.logic_param).each(function(t,e){if("true"==e.custom.toLowerCase()){var a='<input type="text" id="'+e.key+'" value="'+e.value+'" />';"template_group"==e.key&&(a="<select id='"+e.key+"'></select>");var i='<div class="col-sm-12"><div class="col-sm-3 control-label no-padding-right">'+e.text+':</div><div class="col-sm-9">'+a+"</div></div>";$("#task_target").append(i),"template_group"==e.key&&jsonm("template/group_cache.php","#templateGroupSelect","#template_group")}}),$("#task_credit").val(a.logic_credit),void $("#task_target_num").val(a.logic_param)):void 0})});</script>