<div class="row" id="test-content"><div class="col-xs-12"><label class="col-sm-12 control-label no-padding-right" data-i18n="taskAdd.editTitle"></label><form class="form-horizontal" role="form" class="task"><div class="form-group"><label class="col-sm-3 control-label no-padding-right" for="task_credit" data-i18n="taskAdd.taskCredit"></label><div class="col-sm-9"><input id="task_credit" type="number" min="0" placeholder="" class="col-xs-10 col-sm-5" data-i18n="taskAdd.taskCreditInput"></div></div><div class="form-group"><label class="col-sm-3 control-label no-padding-right" for="task_target_num" data-i18n="taskAdd.taskTargetNum"></label><div class="col-sm-9"><input id="task_target_num" type="number" min="0" placeholder="" class="col-xs-10 col-sm-5" data-i18n="taskAdd.taskTargetNumInput"></div></div><div class="form-group"><label class="col-sm-3 control-label no-padding-right" data-i18n="taskAdd.hoursLimit"></label><div class="col-sm-9"><label><input id="hours_limit" name="hours_limit" class="ace ace-switch ace-switch-7" type="checkbox"> <span class="lbl"></span></label></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit0"></label><input class="col-sm-2" type="number" min="1" name="task_h_0" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit1"></label><input class="col-sm-2" type="number" min="1" name="task_h_1" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit2"></label><input class="col-sm-2" type="number" min="1" name="task_h_2" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit3"></label><input class="col-sm-2" type="number" min="1" name="task_h_3" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit4"></label><input class="col-sm-2" type="number" min="1" name="task_h_4" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit5"></label><input class="col-sm-2" type="number" min="1" name="task_h_5" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit6"></label><input class="col-sm-2" type="number" min="1" name="task_h_6" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit7"></label><input class="col-sm-2" type="number" min="1" name="task_h_7" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit8"></label><input class="col-sm-2" type="number" min="1" name="task_h_8" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit9"></label><input class="col-sm-2" type="number" min="1" name="task_h_9" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit10"></label><input class="col-sm-2" type="number" min="1" name="task_h_10" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit11"></label><input class="col-sm-2" type="number" min="1" name="task_h_11" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit12"></label><input class="col-sm-2" type="number" min="1" name="task_h_12" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit13"></label><input class="col-sm-2" type="number" min="1" name="task_h_13" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit14"></label><input class="col-sm-2" type="number" min="1" name="task_h_14" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit15"></label><input class="col-sm-2" type="number" min="1" name="task_h_15" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit16"></label><input class="col-sm-2" type="number" min="1" name="task_h_16" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit17"></label><input class="col-sm-2" type="number" min="1" name="task_h_17" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit18"></label><input class="col-sm-2" type="number" min="1" name="task_h_18" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit19"></label><input class="col-sm-2" type="number" min="1" name="task_h_19" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit20"></label><input class="col-sm-2" type="number" min="1" name="task_h_20" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit21"></label><input class="col-sm-2" type="number" min="1" name="task_h_21" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit22"></label><input class="col-sm-2" type="number" min="1" name="task_h_22" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div><div class="col-sm-12 hours_limit"><label class="col-sm-3 control-label" data-i18n="taskAdd.hoursLimit23"></label><input class="col-sm-2" type="number" min="1" name="task_h_23" value="1"><div class="col-sm-1"></div><div class="col-sm-6 input-size-slider"></div></div></div><div class="clearfix form-actions"><div class="col-md-offset-3 col-md-6"><button class="btn btn-info" type="button" onclick="updateTask()"><i class="ace-icon fa fa-check bigger-110"></i> <span data-i18n="operation.save"></span></button></div></div></form></div></div><style>#task_target>div{padding-left:0;padding-right:0}</style><script type="text/javascript">function loadWebSite(){jsonp("website/ls.php",function(t){$("#website").unbind("change");var a=$("<option>").val("").text("请选择...");$("#website").append(a),$.each(t,function(t,e){a=$("<option>").val(e.website_id).text(e.website_name),$("#website").append(a)}),tmp_task&&$("#website").val(tmp_task.logic_website),$("#website").bind("change",function(){$("#logic").removeAttr("disabled"),loadLogic($(this).val())})})}function loadLogic(t){t&&($("#logic").empty(),jsonp("task/logic.php?website="+t,function(t){tmp_logic_data=t.rows;var a=$("<option>").val("").text("请选择...");$("#logic").append(a),$.each(tmp_logic_data,function(t,e){a=$("<option>").val(e.logic_id).text(e.logic_name),$("#logic").append(a)}),tmp_task&&$("#logic").val(tmp_task.logic_id)}))}function loadTarget(){$(tmp_task.task_target).each(function(t,a){if("true"==a.custom.toLowerCase()){var e='<div class="col-sm-12"><div class="col-sm-3 control-label no-padding-right">'+a.text+':</div><div class="col-sm-9"><input type="text" name="'+a.key+'" value="'+a.value+'" /></div></div>';$("#task_target").append(e)}})}function updateTask(){var t=$("#task_credit").val(),a=$("#task_target_num").val(),e=$("#hours_limit:checked").length>0?1:0,i="id="+tmp_task.task_id;i+="&task_credit="+t,i+="&task_target_num="+a,i+="&hours_limit="+e;for(var o=0;24>o;o++)i+="&task_h_"+o+"="+$("input[name=task_h_"+o+"]").val();jsonp("task/update.php?"+i,function(t){1==t.result&&(loadTable(),hidePbox()),mbox(t.msg)})}$(function(){$(".hours_limit").hide(),$("#hours_limit").on("change",function(){var t=$("#hours_limit");return $("#task_target_num").val()>0?void(t.attr("checked")?(t.removeAttr("checked"),$(".hours_limit").hide()):(t.attr("checked","checked"),$(".hours_limit").show())):(t.removeAttr("checked"),void $(".hours_limit").hide())}),$("#task_target_num").on("change",function(){var t=$(this);return t.val()>0?void $(".input-size-slider").slider({max:t.val()}):(t.removeAttr("checked"),void $(".hours_limit").hide())}),$(".input-size-slider").slider({value:1,range:"min",min:1,max:100,step:1,slide:function(t,a){var e=$(this),i=parseInt(a.value);e.parent().find("input[type=number]").val(i)}})}),jsonp("task/view.php?id="+mID,function(t){tmp_task=t,loadWebSite(),$("#website").val(t.logic_website),$("#logic").removeAttr("disabled"),loadLogic(t.logic_website),$("#logic").val(t.logic_id),loadTarget(),$("#task_target_num").val(t.task_target_num),$("#task_credit").val(t.task_credit),$("#task_target_num").val(t.task_target_num);for(var a=!1,e=0;24>e;e++)if(0!=t["task_h_"+e]){a=!0,$("input[name=task_h_"+e+"]").val(t["task_h_"+e]);var i=$("input[name=task_h_"+e+"]").parent().find(".input-size-slider");i.slider("value",t["task_h_"+e]),i.slider("option","max",t.task_target_num)}a&&($("#hours_limit").attr("checked","checked"),$(".hours_limit").show())});var tmp_task={},tmp_logic_data=[],tmp_logic_index=null;$("#logic").attr("disabled","disabled"),$("body").delegate("#logic","change",function(){var t=$(this);$(tmp_logic_data).each(function(a,e){return e.logic_id==t.val()?(tmp_logic_index=a,$("#task_target").html(""),$(e.logic_param).each(function(t,a){if("true"==a.custom.toLowerCase()){var e='<div class="col-sm-12"><div class="col-sm-3 control-label no-padding-right">'+a.text+':</div><div class="col-sm-9"><input type="text" name="'+a.key+'" value="'+a.value+'" /></div></div>';$("#task_target").append(e)}}),$("#task_credit").val(e.logic_credit),void $("#task_target_num").val(e.logic_param)):void 0})});</script>